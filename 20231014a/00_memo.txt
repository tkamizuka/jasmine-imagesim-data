----- Summary -----
The effect of the ADC resolution on the
position-determination accuracy is examined.
The results show that the accuracy degrades
at 12 bit or lower and that the reduction of
the ADC resolution to 13 bit is acceptable. 
Improvement of the accuracy by stacking is
also examined, but the improvement is found
to have a limit. These results are described
in the report JASMINE-C2-TN-KMZ-20240102-01-
ADCresolution. After making the report,
the improvement limit seems to be due to
the bad ePSF created by faint objects
(see 04_stacked/analysis02 and 03).

----- File summary -----
  00_memo.txt: This file.
  01_params: Parameter files for imagesim.
  02_results: FITS files created by imagesim (gain set to 1 e/adu).
  03_converted: FITS files converted to each gain setting (ADC res.: 10, 11, ..., 16 bit).
    analysis01.ipynb: analysis file (gzipped)
    PosAccVsMag.pdf: Result plot
  04_stacked: Stacked files.
    analysis01.ipynb: analysis file.
    --> pdf files are created by this file.
        accuracy improvement found to be limited by something unknown.
    analysis02.ipynb: analysis with 10-mag ePSF instead of individual-mag ePSF.
    --> By using 10-mag ePSF, accuracy found to be improved more.
    analysis03.ipynb: ePSF check.
    --> ePSF from 14.5-mag obj found to be strange. 
  05_flattened: Flattened files (but not successful).
  mkimage.py: python script used to make files in 02_results.
  prg01.py: python script used to make files in 03_converted.
  prg02.py: python script used to make files in 04_stacked.
  prg03.py: python script used to make cross-section plots of PSF.
            -> prg03.pdf created by prg03.py
  prg03-lin.py: almost the same as prg03.py. Used for checking.
  prg032.py: almost the same as prg03.py. Used for checking.
  prg04.py: python script used to make files in 05_flattened (not successful).

----- Log -----
The current version of the imagesim is develop branch commit 61d2f2a. Use this version.

Setting files are copied from the template directory.
  cp ~/jasmine-imagesim/params/templates/ ./01_params -rf

Check and modify the params.
  ctl.json:
    wfe: dummy
    psf: real
    ace: none -> gauss
    flat_interpix: true
    flat_intrapix: true -> false
    M: 5700
    fN: 520
    PixNum: 9
    dx: 0
    dy:0
    dtace: 15e-5 -> 1
    tace' 160
    GaussPSFfwhm: (No need)
    WFEcontrol: (No need)
    ACEcontrol:
      acex_std: 0.275 -> 0.300
      acey_std: 0.275 -> 0.300
      
  det.json:
    readnoise: 15
    Idark: 31.0 -> 33.0
    interpix/stddev: 0.01
    gain: 3.3 -> 1.0

  tel.json:
    EPD: 360
    Cobs: 0.35
    Spider/thickness: 5
    EFL: 4384.6 -> 4370.4

  Modification was based on the latest parameter setting
  written on the wiki page (Version: Oct. 04, 2023)

starplate data copied from 20230422a.
  cp ../20230422a/01_params/case01/spcsv_20_1968_1*.csv 01_params/

output dir is 02_results/

Modified mkimage.py copied from 20230422a.
  cp ../20230422a/mkimage.py ./

Run the simulation
  python ./mkimage.py --pd ./01_params --starplate spcsv_20_1968_10_20_12.0.csv --det det.json --tel tel.json --ace ace_001.json --ctl ctl.json --format platefits --overwrite --od ./02_results
--> image data with the gain setting of 1 are created (electron instead of adu).

Then, adc calculation applied (for details, see prg01.py).
  python prg01.py
  
Then, stacked data created (for details, see prg02.py).
  python prg02.py
  
Analyses are done in 03_converted and 04_stacked.
  See analysis01.ipynb in each directory.
  
prg03.py makes cross-section of a PSF.
--> prg03.pdf is the output plot.

Accuracy improvement limit is investigated in
04_stacked/analysis0[23].ipynb
--> If 10-mag ePSF used, accuracy improves.
--> 14.5-mag ePSF is bad. This seems to be the cause of the limit.
